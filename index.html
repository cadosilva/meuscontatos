<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minhas Redes Sociais - Jogo Melhorado</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
</head>
<body>
    <!-- Banner -->
    <div class="header">
        <img src="banner.jpg" alt="Banner">
    </div>

    <div class="container">
        <h1>Bem-vindo às minhas redes sociais!</h1>
        <p>Escolha a rede social que deseja acessar:</p>
        
        <div class="links">
            <a href="https://www.facebook.com/profile.php?id=100004529502599" target="_blank">
                <i class="fab fa-facebook"></i> Facebook
            </a>
            <a href="https://www.youtube.com/@cadogames7229" target="_blank">
                <i class="fab fa-youtube"></i> YouTube
            </a>
            <a href="https://www.tiktok.com/@cadosilvasc" target="_blank">
                <i class="fab fa-tiktok"></i> TikTok
            </a>
            <a href="https://www.instagram.com/cado_silvasc/" target="_blank">
                <i class="fab fa-instagram"></i> Instagram
            </a>
            <a href="https://www.twitch.tv/cadogamesof" target="_blank">
                <i class="fab fa-twitch"></i> Twitch
            </a>
            <a href="https://kick.com/cadosilva" target="_blank">
                <i class="fas fa-gamepad"></i> Kick
            </a>
        </div>

        <!-- QR Code -->
        <div class="qr-code">
            <img src="whatsapp-qr.jpeg" alt="QR Code do WhatsApp">
            <p>Escaneie esse código para me adicionar no WhatsApp!</p>
        </div>

        <!-- Ranking de Jogadores -->
        <div class="ranking">
            <h2>Ranking dos 5 Melhores Jogadores</h2>
            <ul id="rankingList"></ul>
        </div>

        <!-- Seleção de Nickname e Classe -->
        <div class="start-game">
            <h2>Escolha seu Nickname e Classe</h2>
            <label for="nickname">Nickname: </label>
            <input type="text" id="nickname" placeholder="Digite seu nickname">
            
            <label for="class">Classe: </label>
            <select id="class">
                <option value="guerreiro">Guerreiro</option>
                <option value="mago">Mago</option>
                <option value="arqueiro">Arqueiro</option>
            </select>
            
            <button onclick="startGame()">Iniciar Jogo</button>
        </div>

        <!-- Jogo Melhorado -->
        <div class="game" style="display: none;">
            <h2 id="playerNameTitle"></h2>
            <div class="status">
                <p><strong>Classe: <span id="playerClass"></span></strong></p>
                <p><strong>Vida:</strong> <span id="playerHealth">100</span> | XP: <span id="playerXP">0</span> | Ouro: <span id="playerGold">0</span></p>
                <p><strong>Inimigo</strong> - Vida: <span id="enemyHealth">100</span></p>
            </div>
            <div class="inventory">
                <p>Inventário: <span id="inventory">Nada</span></p>
            </div>
            <p id="gameMessage">Você encontrou um inimigo! Escolha uma ação:</p>
            <button onclick="attack()">Atacar</button>
            <button onclick="useAbility()">Usar Habilidade</button>
            <button onclick="defend()">Defender</button>
            <button onclick="run()">Fugir</button>
            <button onclick="goToCity()">Ir para a Cidade</button>
        </div>

        <!-- Loja na Cidade -->
        <div class="city" style="display: none;">
            <h2>Bem-vindo à Cidade</h2>
            <p>Você pode comprar itens para se fortalecer.</p>
            <button onclick="buyItem('poção')">Comprar Poção de Cura (20 Ouro)</button>
            <button onclick="buyItem('espada')">Comprar Espada Melhorada (50 Ouro)</button>
            <button onclick="leaveCity()">Sair da Cidade</button>
        </div>

        <script>
            let playerHealth = 100;
            let enemyHealth = 100;
            let playerXP = 0;
            let playerGold = 0;
            let playerLevel = 1;
            let inventory = [];
            let playerClass = '';
            let playerNickname = '';

            const MAX_LEVEL = 50;

            function startGame() {
                playerNickname = document.getElementById('nickname').value;
                playerClass = document.getElementById('class').value;

                if (!playerNickname) {
                    alert('Por favor, digite um nickname.');
                    return;
                }

                if (playerClass === 'guerreiro') {
                    playerHealth = 120;
                    playerGold = 10;
                } else if (playerClass === 'mago') {
                    playerHealth = 80;
                    playerGold = 15;
                } else if (playerClass === 'arqueiro') {
                    playerHealth = 100;
                    playerGold = 12;
                }

                document.getElementById('playerNameTitle').innerText = `Jogador: ${playerNickname}`;
                document.getElementById('playerClass').innerText = playerClass;

                document.querySelector('.start-game').style.display = 'none';
                document.querySelector('.game').style.display = 'block';

                updateStatus();
                loadPlayerData();  // Carrega os dados do jogador do LocalStorage
            }

            function updateStatus() {
                document.getElementById('playerHealth').innerText = playerHealth > 0 ? playerHealth : 0;
                document.getElementById('enemyHealth').innerText = enemyHealth > 0 ? enemyHealth : 0;
                document.getElementById('playerXP').innerText = playerXP;
                document.getElementById('playerGold').innerText = playerGold;
                document.getElementById('inventory').innerText = inventory.length > 0 ? inventory.join(', ') : 'Nada';
                savePlayerData();  // Salva os dados automaticamente após cada ação
            }

            function savePlayerData() {
                const playerData = {
                    nickname: playerNickname,
                    level: playerLevel,
                    xp: playerXP,
                    gold: playerGold,
                    class: playerClass,
                    inventory: inventory,
                };
                localStorage.setItem(playerNickname, JSON.stringify(playerData));
                updateRanking();  // Atualiza o ranking após cada atualização
            }

            function loadPlayerData() {
                const savedData = localStorage.getItem(playerNickname);
                if (savedData) {
                    const data = JSON.parse(savedData);
                    playerLevel = data.level;
                    playerXP = data.xp;
                    playerGold = data.gold;
                    playerClass = data.class;
                    inventory = data.inventory;
                    updateStatus();  // Atualiza o status com os dados carregados
                }
            }

            function updateRanking() {
                const rankingData = [];
                for (let i = 0; i < localStorage.length; i++) {
                    const key = localStorage.key(i);
                    const playerData = JSON.parse(localStorage.getItem(key));
                    rankingData.push(playerData);
                }

                // Ordenar os jogadores pelo nível
                rankingData.sort((a, b) => b.level - a.level);

                // Exibir os 5 melhores jogadores no ranking
                const rankingList = document.getElementById('rankingList');
                rankingList.innerHTML = '';
                for (let i = 0; i < Math.min(5, rankingData.length); i++) {
                    const player = rankingData[i];
                    rankingList.innerHTML += `<li>${player.nickname} - Nível: ${player.level}</li>`;
                }
            }

            function attack() {
                const playerDamage = Math.floor(Math.random() * 20) + 1;
                const enemyDamage = Math.floor(Math.random() * 15) + 1;

                enemyHealth -= playerDamage;
                playerHealth -= enemyDamage;

                if (enemyHealth <= 0) {
                    gainXP(50);
                    playerGold += 20;
                    document.getElementById('gameMessage').innerText = "Você derrotou o inimigo! Ganhou 50 XP e 20 de ouro.";
                    resetEnemy();
                } else if (playerHealth <= 0) {
                    playerDeath();
                } else {
                    document.getElementById('gameMessage').innerText = `Você causou ${playerDamage} de dano! O inimigo causou ${enemyDamage} de dano em você!`;
                }

                updateStatus();
            }

            function gainXP(amount) {
                if (playerLevel < MAX_LEVEL) {
                    playerXP += amount;
                    if (playerXP >= playerLevel * 100) {
                        playerXP = 0;
                        playerLevel++;
                        document.getElementById('gameMessage').innerText += ` Parabéns, você subiu para o nível ${playerLevel}!`;
                    }
                }
                updateStatus();
            }

            function playerDeath() {
                playerXP = Math.floor(playerXP * 0.8);
                document.getElementById('gameMessage').innerText = "Você morreu e perdeu 20% de sua experiência.";
                resetEnemy();
            }

            function goToCity() {
                document.querySelector('.game').style.display = 'none';
                document.querySelector('.city').style.display = 'block';
            }

            function buyItem(item) {
                if (item === 'poção' && playerGold >= 20) {
                    playerGold -= 20;
                    inventory.push("Poção de Cura");
                    document.getElementById('gameMessage').innerText = "Você comprou uma Poção de Cura!";
                } else if (item === 'espada' && playerGold >= 50) {
                    playerGold -= 50;
                    document.getElementById('gameMessage').innerText = "Você comprou uma Espada Melhorada!";
                } else {
                    document.getElementById('gameMessage').innerText = "Ouro insuficiente!";
                }
                updateStatus();
            }

            function leaveCity() {
                document.querySelector('.city').style.display = 'none';
                document.querySelector('.game').style.display = 'block';
            }

            function resetEnemy() {
                enemyHealth = 100;
                updateStatus();
            }

            // Carregar o ranking na inicialização
            window.onload = updateRanking;
        </script>
    </body>
</html>
